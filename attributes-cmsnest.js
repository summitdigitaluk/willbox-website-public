"use strict";(()=>{(()=>{var V=Object.defineProperty,G=(t,e,r)=>e in t?V(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,J=(t,e,r)=>(G(t,typeof e!="symbol"?e+"":e,r),r),b="fs-attributes",Q="cmsattribute",X="cmscore",A="cmsnest",M="support",Y=async(...t)=>{var e;let r=[];for(let n of t){let i=await((e=window.fsAttributes[n])==null?void 0:e.loading);r.push(i)}return r},E=class{static activateAlerts(){this.alertsActivated=!0}static alert(t,e){if(this.alertsActivated&&window.alert(t),e==="error")throw new Error(t)}};J(E,"alertsActivated",!1);var Z=()=>{},ee=(t,e)=>!!t&&e.includes(t),T=t=>typeof t=="string",te={wrapper:"w-dyn-list",list:"w-dyn-items",item:"w-dyn-item",paginationWrapper:"w-pagination-wrapper",paginationNext:"w-pagination-next",paginationPrevious:"w-pagination-previous",pageCount:"w-page-count",emptyState:"w-dyn-empty"},j=(t,e=!0)=>t.cloneNode(e);function re(t,e,r,n=!0){let i=r?[r]:[];if(!t)return i;let a=t.split(",").reduce((l,s)=>{let u=s.trim();return(!n||u)&&l.push(u),l},[]);if(e){let l=a.filter(s=>ee(s,e));return l.length?l:i}return a}var ne=(t=document)=>{var e;let r="Last Published:";for(let n of t.childNodes)if(n.nodeType===Node.COMMENT_NODE&&(e=n.textContent)!=null&&e.includes(r)){let i=n.textContent.trim().split(r)[1];if(i)return new Date(i)}},O=(t=document)=>t.documentElement.getAttribute("data-wf-site");function ie(t,e,r){var n;let i=window.fsAttributes[t];return i.destroy=r||Z,(n=i.resolve)==null||n.call(i,e),e}var W=(t,e="1",r="iife")=>{let n=`${t}${r==="esm"?".esm":""}.js`;return`https://cdn.jsdelivr.net/npm/@finsweet/attributes-${t}@${e}/${n}`},ae=W(X,"1"),le=async()=>{let{fsAttributes:t}=window;t.cmscore||(t.cmscore={});let{cmscore:e}=t;if(e.import)return e.import;try{return e.import=import(ae),e.import.then(r=>{r&&(e.version||(e.version=r.version))}),e.import}catch(r){E.alert(`${r}`,"error");return}},se=`${b}-${M}`,oe=async()=>{var t;let{fsAttributes:e,location:r}=window,{host:n,searchParams:i}=new URL(r.href);return!n.includes("webflow.io")||!i.has(se)?!1:(t=e.import)==null?void 0:t.call(e,M,"1")},D=t=>{let e=(n,i,a)=>{let l=t[n],{key:s,values:u}=l,o;if(!i)return`[${s}]`;let p=u==null?void 0:u[i];T(p)?o=p:o=p(a&&"instanceIndex"in a?a.instanceIndex:void 0);let c=a&&"caseInsensitive"in a&&a.caseInsensitive?"i":"";if(!(a!=null&&a.operator))return`[${s}="${o}"${c}]`;switch(a.operator){case"prefixed":return`[${s}^="${o}"${c}]`;case"suffixed":return`[${s}$="${o}"${c}]`;case"contains":return`[${s}*="${o}"${c}]`}};function r(n,i){let a=e("element",n,i),l=(i==null?void 0:i.scope)||document;return i!=null&&i.all?[...l.querySelectorAll(a)]:l.querySelector(a)}return[e,r,(n,i)=>{let a=t[i];return a?n.getAttribute(a.key):null}]},S={preventLoad:{key:`${b}-preventload`},debugMode:{key:`${b}-debug`},src:{key:"src",values:{finsweet:"@finsweet/attributes"}},dev:{key:`${b}-dev`}},[_,Re]=D(S),ue=t=>{let{currentScript:e}=document,r={};if(!e)return{attributes:r,preventsLoad:!1};let n={preventsLoad:T(e.getAttribute(S.preventLoad.key)),attributes:r};for(let i in t){let a=e.getAttribute(t[i]);n.attributes[i]=a}return n},ce=({scriptAttributes:t,attributeKey:e,version:r,init:n})=>{var i;pe(),(i=window.fsAttributes)[e]||(i[e]={});let{preventsLoad:a,attributes:l}=ue(t),s=window.fsAttributes[e];s.version=r,s.init=n,a||(window.Webflow||(window.Webflow=[]),window.Webflow.push(()=>n(l)))},pe=()=>{let t=me();if(window.fsAttributes&&!Array.isArray(window.fsAttributes)){P(window.fsAttributes,t);return}let e=fe(t);P(e,t),de(e),window.fsAttributes=e,window.FsAttributes=window.fsAttributes,oe()},fe=t=>{let e={cms:{},push(...r){var n,i;for(let[a,l]of r)(i=(n=this[a])==null?void 0:n.loading)==null||i.then(l)},async import(r,n){return e[r]||new Promise(a=>{let l=document.createElement("script");l.src=W(r,n),l.async=!0,l.onload=()=>{let[s]=P(e,[r]);a(s)},document.head.append(l)})},destroy(){var r,n;for(let i of t)(n=(r=window.fsAttributes[i])==null?void 0:r.destroy)==null||n.call(r)}};return e},me=()=>{let t=_("src","finsweet",{operator:"contains"}),e=_("dev");return[...document.querySelectorAll(`script${t}, script${e}`)].reduce((r,n)=>{var i;let a=n.getAttribute(S.dev.key)||((i=n.src.match(/[\w-. ]+(?=(\.js)$)/))==null?void 0:i[0]);return a&&!r.includes(a)&&r.push(a),r},[])},P=(t,e)=>e.map(r=>{let n=t[r];return n||(t[r]={},n=t[r],n.loading=new Promise(i=>{n.resolve=a=>{i(a),delete n.resolve}}),n)}),de=t=>{let e=Array.isArray(window.fsAttributes)?window.fsAttributes:[];t.push(...e)},we="1.12.0",ve="fs-cms-element",ye={wrapper:"wrapper",list:"list",item:"item",paginationWrapper:"pagination-wrapper",paginationNext:"pagination-next",paginationPrevious:"pagination-previous",pageCount:"page-count",emptyState:"empty"},d=t=>{let e=`.${te[t]}`,r=`[${ve}="${ye[t]}"]`;return`:is(${e}, ${r})`},ge=(t,e=document)=>{t=t.filter(n=>n);let r=t.join(", ")||d("wrapper");return[...e.querySelectorAll(r)].reduce((n,i)=>{if(!i)return n;let a=x(i,"wrapper");return!a||n.includes(a)||n.push(a),n},[])};function x(t,e,r=document){let n=typeof t=="string"?r.querySelector(t):t;if(!n)return;let i=n.closest(d("wrapper"));if(!i)return;let a=i.querySelector(d("list"));return e==="wrapper"?i:e==="list"?a:e==="items"?[...(a==null?void 0:a.querySelectorAll(`:scope > ${d("item")}`))||[]]:e==="pageCount"?i.querySelector(d("pageCount")):e==="empty"?i.querySelector(`:scope > ${d("emptyState")}`):e==="pagination"?i.querySelector(d("paginationWrapper")):i.querySelector(d(e==="next"?"paginationNext":"paginationPrevious"))}var w="pages",I=new Map,he=async(t,{cache:e=!0,cacheExternal:r,cacheKey:n,cacheVersion:i}={})=>{var a,l;try{let s=new URL(t,window.location.origin),u=await be(s);if(u)return u;let o=O(),p=ne(),c=o||n,f=(l=(a=p==null?void 0:p.getTime())!=null?a:i)!=null?l:1,m=c?await $e(c,f):null;if(!e||!m){let{page:g}=await R(s);return g}let h=await Ae(m,s.href);if(h){let g=k(h);return r&&!B(g,o)&&U(m,s,o,r),g}return await U(m,s,o,r)}catch(s){return null}},be=async t=>{let e=await I.get(t.href);if(e)return k(e)},R=async t=>{let e=fetch(t.href).then(n=>n.text());I.set(t.href,e);let r=await e;return{page:k(r),rawPage:r}},U=async(t,e,r,n)=>{let{page:i,rawPage:a}=await R(e),l=B(i,r);return!l&&!n||(await Se(t,e.href,a),l&&I.delete(e.href)),i},B=(t,e)=>{if(!e)return!1;let r=O(t);return r&&r===e},k=t=>new DOMParser().parseFromString(t,"text/html"),$e=(t,e)=>new Promise(r=>{try{let n=window.indexedDB.open(t,e);n.onblocked=()=>{r(null)},n.onupgradeneeded=()=>{let i=n.result;i.objectStoreNames.contains(w)&&i.deleteObjectStore(w),i.createObjectStore(w)},n.onerror=()=>r(null),n.onsuccess=()=>{let i=n.result;i.onversionchange=()=>i.close(),r(i)}}catch(n){r(null)}}),Ae=async(t,e)=>new Promise(r=>{let n=t.transaction(w).objectStore(w).get(e);n.onerror=()=>r(null),n.onsuccess=()=>r(n.result)}),Se=async(t,e,r)=>new Promise(n=>{let i=t.transaction(w,"readwrite").objectStore(w).put(r,e);i.onerror=()=>n(),i.onsuccess=()=>n()});function q(t){return t==null?void 0:t.trim().toLowerCase()}var $=`fs-${A}`,Pe="list",xe="nest-target",Ie="slugs",ke="collection",qe="empty",Ne="cache",Ce={false:"false"},v={element:{key:`${$}-element`,values:{list:Pe,nestTarget:xe,slugs:Ie}},collection:{key:`${$}-${ke}`},empty:{key:`${$}-${qe}`},cacheItems:{key:`${$}-${Ne}`,values:Ce}},[y,Ue,Le]=D(v),Me=({createCMSListInstances:t})=>{let e=new Map,r=t([y("collection")]);for(let n of r){let i=q(n.getAttribute(v.collection.key));if(!i)continue;let a=document.querySelector(`[${v.empty.key}^="${i}"]`);a&&(a.style.display="none"),n.wrapper.style.display="none",e.set(i,{listInstance:n,emptyElement:a})}return e},Ee=t=>{let e=[...t.querySelectorAll(`${y("collection")}:not(a)`)].reduce((i,a)=>{let l=q(Le(a,"collection"));if(!l)return i;let s=i.get(l)||[];return s.push(a),i.set(l,s),i},new Map),r=new Map,n=new Map;for(let[i,a]of e){let l=a.find(u=>u.matches(y("element","nestTarget"))),s=a.find(u=>u.matches(y("element","slugs")));if(l&&s){let u=re(s.textContent);r.set(i,{slugs:u,nestTarget:l});continue}n.set(i,a[0])}return{manualNestTargets:r,externalNestTargets:n}},N=async(t,e,r,n)=>{let{manualNestTargets:i,externalNestTargets:a}=Ee(t.element);await Promise.all([Te(i,e,r,n),je(a,t,e,r,n)])},Te=(t,e,r,n)=>Promise.all([...t].map(([i,{nestTarget:a,slugs:l}])=>{let s=e.get(i);if(!s)return;let u=s.listInstance.items.filter(({href:o})=>{if(!o)return!1;try{let p=new URL(o),[c]=p.pathname.match(/[^/]+(?=\/$|$)/g)||[];return c&&l.includes(c)}catch(p){return!1}});return H(a,u,s,e,r,n)})),je=async(t,e,r,n,i)=>{let{CMSList:a}=i;if(!t.size||!e.href)return;let l=await he(e.href,{cache:n});if(!l)return;let s=ge([y("collection")],l),u=new Set;await Promise.all(s.map(async(o,p)=>{let c=new a(o,p),f=q(c.getAttribute(v.collection.key));if(!f||u.has(f))return;u.add(f);let m=r.get(f),h=t.get(f);if(!m||!h)return;let g=c.items.reduce((C,{element:L})=>{if(!L)return C;console.log("F",L);let K=L.querySelector("[fs-cmsnest-href]").getAttribute("fs-cmsnest-href");console.log("_nestHref",K);let z=m.listInstance.items.find(_e=>{let F=_e.element.querySelector("[fs-cmsnest-href]").getAttribute("fs-cmsnest-href");return!!(F&&K===F)});return z&&C.push(z),C},[]);await H(h,g,m,r,n,i)}))},H=async(t,e,{listInstance:r,emptyElement:n},i,a,l)=>{let{CMSItem:s}=l;if(!e.length&&!n)return;let u=t.parentElement;if(!u)return;let o=j(r.wrapper),p=x(o,"items");if(o.style.display="",e.length)await Promise.all([...p].map(c=>{if(!e.find(({element:m})=>m.isEqualNode(c))){c.remove();return}let f=new s(c,o);return N(f,i,a,l)}));else if(n){let c=x(o,"list");c==null||c.remove();let f=j(n);f.style.display="",o.appendChild(f)}u.insertBefore(o,t),t.remove()},Oe=(t,e,r)=>{t.on("shouldnest",async n=>{await Promise.all(n.map(i=>N(i,e,t.cacheItems,r)))})},We=async(t,e)=>{let r=Me(e);if(!r.size)return;Oe(t,r,e),t.getAttribute(v.cacheItems.key)===v.cacheItems.values.false&&(t.cacheItems=!1);let n=[...t.items];await Promise.all(n.map(i=>N(i,r,t.cacheItems,e))),await t.emitSerial("nestinitialitems",n)},De=async()=>{let t=await le();if(!t)return[];await Y(Q);let e=t.createCMSListInstances([y("element","list",{operator:"prefixed"})]);return await Promise.all(e.map(r=>We(r,t))),ie(A,e,()=>{for(let r of e)r.destroy()})};ce({init:De,version:we,attributeKey:A})})();})();
