"use strict";(()=>{function G(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}else return Array.from(t)}var k=!1;typeof window!="undefined"&&(E={get passive(){k=!0}},window.addEventListener("testPassive",null,E),window.removeEventListener("testPassive",null,E));var E,S=typeof window!="undefined"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1),v=[],x=!1,J=-1,g=void 0,f=void 0,h=void 0,_=function(e){return v.some(function(r){return!!(r.options.allowTouchMove&&r.options.allowTouchMove(e))})},A=function(e){var r=e||window.event;return _(r.target)||r.touches.length>1?!0:(r.preventDefault&&r.preventDefault(),!1)},V=function(e){if(h===void 0){var r=!!e&&e.reserveScrollBarGap===!0,a=window.innerWidth-document.documentElement.clientWidth;if(r&&a>0){var n=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right"),10);h=document.body.style.paddingRight,document.body.style.paddingRight=n+a+"px"}}g===void 0&&(g=document.body.style.overflow,document.body.style.overflow="hidden")},W=function(){h!==void 0&&(document.body.style.paddingRight=h,h=void 0),g!==void 0&&(document.body.style.overflow=g,g=void 0)},X=function(){return window.requestAnimationFrame(function(){if(f===void 0){f={position:document.body.style.position,top:document.body.style.top,left:document.body.style.left};var e=window,r=e.scrollY,a=e.scrollX,n=e.innerHeight;document.body.style.position="fixed",document.body.style.top=-r,document.body.style.left=-a,setTimeout(function(){return window.requestAnimationFrame(function(){var o=n-window.innerHeight;o&&r>=n&&(document.body.style.top=-(r+o))})},300)}})},Z=function(){if(f!==void 0){var e=-parseInt(document.body.style.top,10),r=-parseInt(document.body.style.left,10);document.body.style.position=f.position,document.body.style.top=f.top,document.body.style.left=f.left,window.scrollTo(r,e),f=void 0}},z=function(e){return e?e.scrollHeight-e.scrollTop<=e.clientHeight:!1},K=function(e,r){var a=e.targetTouches[0].clientY-J;return _(e.target)?!1:r&&r.scrollTop===0&&a>0||z(r)&&a<0?A(e):(e.stopPropagation(),!0)},B=function(e,r){if(!e){console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");return}if(!v.some(function(n){return n.targetElement===e})){var a={targetElement:e,options:r||{}};v=[].concat(G(v),[a]),S?X():V(r),S&&(e.ontouchstart=function(n){n.targetTouches.length===1&&(J=n.targetTouches[0].clientY)},e.ontouchmove=function(n){n.targetTouches.length===1&&K(n,e)},x||(document.addEventListener("touchmove",A,k?{passive:!1}:void 0),x=!0))}};var N=function(e){if(!e){console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");return}v=v.filter(function(r){return r.targetElement!==e}),S&&(e.ontouchstart=null,e.ontouchmove=null,x&&v.length===0&&(document.removeEventListener("touchmove",A,k?{passive:!1}:void 0),x=!1)),S?Z():W()};var j=(t,e="text",r="value")=>c(t)===!1?t.map(n=>({[e]:n,[r]:n})):[],F=t=>Array.isArray(t)?t.every(e=>typeof e=="string")?"Array of strings":t.every(e=>typeof e=="object"&&e!==null&&!Array.isArray(e))?"Array of objects":"Mixed array or unknown type":"Not an array",T=(t,e,r,a)=>{$(".select-wrapper--"+e).remove();var n=document.createElement("div");n.classList.add("select-wrapper","select-wrapper--"+e),a&&n.classList.add(...a.split(" "));var o=document.createElement("select");o.id=e,o.name=e,o.classList.add("form-select","w-select");let l;F(t)==="Array of strings"?l=j(t):F(t)==="Array of objects"&&(l=t);for(let d=0;d<l.length;d++){var s=document.createElement("option");s.text=l[d].text,s.value=l[d].value,o.add(s)}var i=document.createElement("div");i.classList.add("select-icon"),$(n).prepend(o).append(i).insertAfter("#"+r)};var c=t=>!Array.isArray(t)||!t.length,P=t=>t instanceof Date&&Object.prototype.toString.call(t)==="[object Date]"&&!isNaN(t.getTime()),ee=t=>(t<10&&(t="0"+t),t);var p=(t,e)=>{var r=new Date(t),a=r.getFullYear(),n=ee(r.getMonth()+1),o=r.getDate();return e?a+"-"+n+"-"+o:a+""+n+o};var Y=()=>{let t=JSON.parse(localStorage.getItem("enquiry"));if(c(t)===!0){$('[data-enquiry="get-a-quote"]').attr("href","/complete-your-enquiry"),$('[data-enquiry="get-a-quote"] .get-a-quote').show().siblings().hide();return}let r=t.reduce((o,l)=>o+parseInt(l.qty,10),0);$('[data-enquiry="total"]').text(r);let a=t.some(o=>o.billing==="hire"),n=t.some(o=>o.billing!=="hire");a&&n?$('[data-enquiry="get-a-quote"]').attr("href","/complete-your-enquiry?reason=NewHireSalesQuote"):a?$('[data-enquiry="get-a-quote"]').attr("href","/complete-your-enquiry?reason=NewHireQuote"):$('[data-enquiry="get-a-quote"]').attr("href","/complete-your-enquiry?reason=NewSalesQuote"),$('[data-enquiry="get-a-quote"] .complete-enquiry').show().siblings().hide()};var te=$(".modal").length<1;$(document).on("change","#billing",function(){var t=$(this).val().toLowerCase();t==="hire"?$("#date-picker").removeClass("hidden"):$("#date-picker").addClass("hidden"),$('[data-enquiry="add-to-enquiry"] .icon-check').length&&$('[data-enquiry="add-to-enquiry"]').html('<span class="button-text icon-add">Add to Enquiry</span>')});$('.increase[data-for="enquiry-ribbon"]').on("click",function(t){t.preventDefault();var e=$(this),r=e.parent(),a=r.siblings(".counter"),n=a.val();if(n>=1&&r.siblings(".interaction-button-wrapper").find(".decrease").prop("disabled",!1).removeAttr("disabled"),n<99){var o=+n+1;a.val(o).trigger("change")}});$('.decrease[data-for="enquiry-ribbon"]').on("click",function(t){t.preventDefault();var e=$(this),r=e.parent(),a=r.siblings(".counter"),n=a.val();if(n>1){n===2&&e.prop("disabled",!0).attr("disabled","");var o=+n-1;a.val(o).trigger("change")}});localStorage.getItem("enquiry")?D=JSON.parse(localStorage.getItem("enquiry")):(D=[],localStorage.setItem("enquiry",JSON.stringify(D)));var D;$(document).on("click",'[data-enquiry="add-to-enquiry-modal"]',function(t){t.preventDefault(),$("#variant-select").addClass("hidden"),$("#date-picker").addClass("hidden"),$('[data-enquiry="add-to-enquiry"] .icon-check').length&&$('[data-enquiry="add-to-enquiry"]').html('<span class="button-text icon-add">Add to Enquiry</span>');var e=$(this),r=e.closest(".content_card"),a=r.find(".product_singular_name")&&r.find(".product_singular_name").text()!==""?r.find(".product_singular_name").text():r.find(".content_card_title").text(),n=r.find('[data-node-type="commerce-add-to-cart-option-select"]').children(),o=r.find(".content_card-image").attr("src"),l=[];$.each(n,function(d){this.value!==""&&l.push(this.text)}),$('[data-enquiry="img"]').html(o),$('[data-enquiry="singular-name"]').html(a),c(l)===!1&&(T(l,"variant","variant-label"),$("#variant-select").removeClass("hidden")),$("#qty").val(1),$('.decrease[data-for="enquiry-ribbon"]').prop("disabled",!0).attr("disabled","");var s=[],i=r.find('[data-enquiry="billing"]');i.each(function(){s.push($(this).text())}),T(s,"billing","billing-label"),s[0]==="Hire"&&$("#date-picker").removeClass("hidden"),re("add-to-enquiry")});function re(t){if(document.getElementById(t)){var e=document.getElementById(t);B(e,{reserveScrollBarGap:!0}),e.scroll(0,0);var r=$("#"+t);r.removeClass("closed").addClass("opening").css("display","flex");let a=r.find(".modal-background");a.fadeIn(350),setTimeout(function(){r.removeClass("opening").addClass("open"),$(".loading").removeClass("loading"),a.on("click",function(){y(t)})},350)}}function y(t){if(document.getElementById(t)){var e=$("#"+t);e.removeClass("open").addClass("closing"),e.find(".modal-background").fadeOut(200),setTimeout(function(){e.removeClass("closing").hide().addClass("closed");var r=document.getElementById(t);N(r)},200)}}$(".close-modal").each(function(){$(this).on("click",function(t){t.preventDefault();var e=$(t.target).closest(".modal").attr("id");y(e)})});$(".add-to-enquiry .form-select, .add-to-enquiry .input.counter, .add-to-enquiry .calendar-field").each(function(){$(this).on("change",function(){$('[data-enquiry="add-to-enquiry"] .icon-check').length&&$('[data-enquiry="add-to-enquiry"]').html('<span class="button-text icon-add">Add to Enquiry</span>')})});$('[data-enquiry="add-to-enquiry"]').on("click",function(t){t.preventDefault();var e=!0,r=JSON.parse(localStorage.getItem("enquiry")),a="",n="",o="",l="",s="",i=[],d="";if(a=$('[data-enquiry="singular-name"]').length&&$('[data-enquiry="singular-name"]').text()!==""?$('[data-enquiry="singular-name"]').text():$('[data-enquiry="name"]').text(),n=$("#variant").length&&!$("#variant-select").hasClass("hidden")?$("#variant"):$('.product-sidebar [data-node-type="commerce-add-to-cart-option-select"]').length?$('[data-node-type="commerce-add-to-cart-option-select"]'):null,o=n!==null?o.id==="variant"?n.val():n.children('[value="'+n.val()+'"]').text():"n/a",l=$(".counter").val()>0?$(".counter").val():"1",s=$("#billing").val().toLowerCase(),d=te?$('[data-enquiry="img"]').eq(0).attr("src"):$('[data-enquiry="img"]').text(),i=P($("#hire-start").datepicker("getDate"))&&P($("#hire-end").datepicker("getDate"))?[$("#hire-start").datepicker("getDate"),$("#hire-end").datepicker("getDate")]:[],localStorage.setItem("selectedDates",JSON.stringify(i)),n!==null){if(o===""||o.indexOf("Select")>-1){e=!1,n.siblings(".form-error").length||$('<div class="form-error">Please select a product to add</div>').insertAfter(n),n.trigger("focus");return}n.siblings(".form-error").remove()}if(c(r)===!1){var w=!1;for(let b=0;b<r.length&&!w;b++)if(r[b].billing===s){var u=r[b];for(var C in u)if(u.hasOwnProperty(C)&&C==="id"){var R=u[C],O;if(s==="hire"?O=i[0]&&i[1]?a.toLowerCase().replace(/[^\w]/g,"")+o.toLowerCase().replace(/[^\w]/g,"")+"startdate"+p(i[0])+"enddate"+p(i[1]):a.toLowerCase().replace(/[^\w]/g,"")+o.toLowerCase().replace(/[^\w]/g,"")+"noselecteddates":O=a.toLowerCase().replace(/[^\w]/g,"")+o.toLowerCase().replace(/[^\w]/g,""),R===O)if(s==="hire"){var q=u.selectedDates;let U=c(q)===!1,H=c(q)===!0,Q=c(i)===!1,M=c(i)===!0;if((U&&Q||H&&M)&&(H&&M||q[0]===i[0].toISOString()&&q[1]===i[1].toISOString())){w=!0;var L=(parseInt(u.qty,10)+parseInt(l,10)).toString();u.qty=L,localStorage.setItem("enquiry",JSON.stringify(r)),y("add-to-enquiry"),I({name:a,img:d,variant:o})}}else{w=!0;var L=(parseInt(u.qty,10)+parseInt(l,10)).toString();u.qty=L,localStorage.setItem("enquiry",JSON.stringify(r)),y("add-to-enquiry"),I({name:a,img:d,variant:o})}}}if(!w){if(s==="hire")var m={billing:s,id:i[0]&&i[1]?a.toLowerCase().replace(/[^\w]/g,"")+o.toLowerCase().replace(/[^\w]/g,"")+"startdate"+p(i[0])+"enddate"+p(i[1]):a.toLowerCase().replace(/[^\w]/g,"")+o.toLowerCase().replace(/[^\w]/g,"")+"noselecteddates",name:a,img:d,variant:o,qty:l,selectedDates:i[0]&&i[1]?i:[]};else var m={billing:s,id:a.toLowerCase().replace(/[^\w]/g,"")+o.toLowerCase().replace(/[^\w]/g,""),name:a,img:d,variant:o,qty:l};r.push(m),localStorage.setItem("enquiry",JSON.stringify(r)),y("add-to-enquiry"),I({name:a,img:d,variant:o})}}else{if(s==="hire")var m={billing:s,id:i[0]&&i[1]?a.toLowerCase().replace(/[^\w]/g,"")+o.toLowerCase().replace(/[^\w]/g,"")+"startdate"+p(i[0])+"enddate"+p(i[1]):a.toLowerCase().replace(/[^\w]/g,"")+o.toLowerCase().replace(/[^\w]/g,"")+"noselecteddates",name:a,img:d,variant:o,qty:l,selectedDates:i[0]&&i[1]?i:[]};else var m={billing:s,id:a.toLowerCase().replace(/[^\w]/g,"")+o.toLowerCase().replace(/[^\w]/g,""),name:a,img:d,variant:o,qty:l};r.push(m),localStorage.setItem("enquiry",JSON.stringify(r)),y("add-to-enquiry"),I({name:a,img:d,variant:o})}$(this).html('<span class="button-text icon-check">Added</span>'),Y()});function I(t){var e=$($("#product-added").eq(0).html()),r=e.find(".product-added-image"),a=e.find(".product-added-title"),n=t.variant!=="n/a"?t.variant+" "+t.name:t.name;a.html(n),r.attr("src",t.img),$("#complete-enquiry").append(e),setTimeout(function(){e.removeClass("hidden")},50),setTimeout(function(){e.addClass("hidden"),setTimeout(function(){e.remove()},350)},5e3)}$("#filter-fleet-list").on("click",function(t){t.preventDefault(),$("#filter-column").fadeIn(200);var e=document.querySelector("#filter-column");B(e),e.scroll(0,0)});$("#filter-column-close").on("click",function(t){t.preventDefault(),$("#filter-column").fadeOut(200),setTimeout(function(){var e=document.querySelector("#filter-column");N(e)},200)});})();
